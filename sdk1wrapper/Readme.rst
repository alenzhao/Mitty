Wrapping Mitty for SBG SDK 1.0
------------------------------

Primary instructions for downloading Vargant files and the docker images are here_

.. _here: https://docs.sbgenomics.com/display/developerhub/SDK+Version+1.0

Some tricks to make life easier with the VM, the docker images and the sbgdk
............................................................................

- The Vagrantfile contains a line `config.vm.synced_folder "~/Code", "/home/vagrant/projects"`
  that can be edited to point to where you want. Don't change this via the VBox GUI because it gets
  overwritten when you do `vagrant up`

- `sbg init` is broken. What works is to copy the `.sbdk` folder into your wrapper root folder (the one with the
  `setup.py` script. You should change the `project_name` field in the `state.json` file to match the folder name
  where your wrapper code is placed (check). The `schema.json` file is auto-generated by `sbg schema` or `sbg push`

- When you copy the `.sbdk` folder, change the `state.json` file to the initial default
  which is `{"image_id": "sevenbridges/sdkbase:beta", "project_name": "mitty"}`. (In the present case it's `mitty`)

- You should have an `__init__.py` file with your wrappers importing the applicable classes. Only then will `sbg push`
  properly send the wrappers into the image

- You should not name the wrapper and their directory the same as the application. Initially I had
  `--/sdk1wrapper/mitty/mitty.py` as the wrapper code and this gave me a lot of grief (the code would work on the
  container but fail several tests run from outside the container claiming that `mitty.lib` was not available). It
  turned out that it was getting confused during testing by the wrapper being named identically.


```
sbg sh
aptitude update
aptitude install gfortran wget cmake liblapack-dev python-pip
#HDF5 need >1.8.16  https://github.com/h5py/h5py/issues/525
cd home
wget http://www.hdfgroup.org/ftp/HDF5/current/src/hdf5-1.8.15-patch1.tar.gz
tar -xvf hdf5-1.8.15-patch1.tar.gz
cd hdf5-1.8.15-patch1
./configure --prefix=/usr/local  # IMPORTANT!!!
make
make install
#pip install numpy
#pip install cython
#pip install h5py
pip install --upgrade pip
hash -r
mkdir ~/.pip # Add the SBG pip server to ~/.pip/pip.conf
pip install -U mitty --pre
```

Testing the wrappers
--------------------
sbg test sbg_mitty.mittyw


Questions/Todos
---------------
- How to wrap nested lists (like that for Chromosome and chromosome limits)
