{
  "id": "https://api.sbgenomics.com/v2/apps/kghosesbg/mitty-apps/bam-sort-index/5/raw/", 
  "description": "", 
  "sbg:revision": 5, 
  "requirements": [], 
  "sbg:modifiedBy": "kghosesbg", 
  "sbg:canvas_zoom": 1, 
  "label": "bam-sort-index", 
  "sbg:createdBy": "kghosesbg", 
  "inputs": [
    {
      "sbg:includeInPorts": true, 
      "sbg:y": 245, 
      "sbg:x": 151, 
      "label": "bam", 
      "type": [
        "File"
      ], 
      "id": "#bam"
    }
  ], 
  "sbg:canvas_y": -66, 
  "sbg:canvas_x": -29, 
  "sbg:sbgMaintained": false, 
  "sbg:modifiedOn": 1457062157, 
  "outputs": [
    {
      "label": "bam_out", 
      "source": [
        "#bam_index.bam_out"
      ], 
      "sbg:y": 130, 
      "sbg:x": 922, 
      "id": "#bam_out", 
      "type": [
        "null", 
        "File"
      ], 
      "sbg:includeInPorts": true
    }, 
    {
      "label": "bai", 
      "source": [
        "#bam_index.bai"
      ], 
      "sbg:y": 376, 
      "sbg:x": 913, 
      "id": "#bai", 
      "type": [
        "null", 
        "File"
      ], 
      "sbg:includeInPorts": true
    }
  ], 
  "sbg:contributors": [
    "kghosesbg"
  ], 
  "sbg:validationErrors": [], 
  "sbg:latestRevision": 5, 
  "class": "Workflow", 
  "hints": [], 
  "sbg:id": "kghosesbg/mitty-apps/bam-sort-index/5", 
  "sbg:createdOn": 1457046142, 
  "steps": [
    {
      "inputs": [
        {
          "source": [
            "#bam"
          ], 
          "id": "#Sambamba_Sort.input"
        }, 
        {
          "id": "#Sambamba_Sort.filter"
        }, 
        {
          "id": "#Sambamba_Sort.compression_level"
        }, 
        {
          "id": "#Sambamba_Sort.memory_limit"
        }, 
        {
          "id": "#Sambamba_Sort.sort_by_name"
        }, 
        {
          "id": "#Sambamba_Sort.natural_sort"
        }, 
        {
          "id": "#Sambamba_Sort.uncompressed_chunks"
        }, 
        {
          "id": "#Sambamba_Sort.nthreads"
        }
      ], 
      "run": {
        "stdout": "", 
        "baseCommand": [
          "/opt/sambamba_0.5.9/sambamba_v0.5.9", 
          "sort"
        ], 
        "sbg:copyOf": "sevenbridges/public-apps/sambamba-sort-0-5-9/3", 
        "sbg:toolAuthor": "Artem Tarasov", 
        "id": "https://api.sbgenomics.com/v2/apps/kghosesbg/mitty-apps/sambamba-sort-0-5-9/0/raw/", 
        "description": "Sambamba Sort does an external sort on the input file. It reads the source BAM file in chunks that fit into its memory, sorts them, writes them to a temporary directory, and then merges them. After merging, the temporary files are automatically removed. The sort is stable, and efforts have been made to make it multithreaded.\n\nBAM files have either 'coordinate' or 'qname' sort order. The former sorts the file by (integer) reference ID. and sorts corresponding reads by its start coordinate. The latter sorts reads lexicographically by their names.\n\nSambamba Sort supports both sorting orders. The default sort order is 'coordinate,' because this is the one used for building index later. In order to switch to 'qname' sorting order, use the -n|--sort-by-name flag.", 
        "sbg:revision": 0, 
        "sbg:latestRevision": 0, 
        "sbg:modifiedBy": "kghosesbg", 
        "sbg:toolkitVersion": "0.5.9", 
        "label": "Sambamba Sort", 
        "sbg:categories": [
          "SAM/BAM-Processing"
        ], 
        "arguments": [
          {
            "position": 3, 
            "valueFrom": {
              "engine": "#cwl-js-engine", 
              "class": "Expression", 
              "script": "{\n  if ($job.inputs.input)\n  {\n   filename = $job.inputs.input.path\n\n    return filename.split('.').slice(0, -1).concat(\"sorted.bam\").join(\".\").replace(/^.*[\\\\\\/]/, '')\n  }\n}"
            }, 
            "prefix": "--out=", 
            "separate": false
          }
        ], 
        "sbg:createdBy": "kghosesbg", 
        "inputs": [
          {
            "sbg:fileTypes": "BAM", 
            "inputBinding": {
              "position": 100, 
              "sbg:cmdInclude": true, 
              "itemSeparator": " ", 
              "separate": true
            }, 
            "description": "BAM file.", 
            "sbg:category": "File inputs", 
            "label": "Input BAM", 
            "type": [
              "File"
            ], 
            "id": "#input"
          }, 
          {
            "sbg:altPrefix": "-F", 
            "inputBinding": {
              "itemSeparator": " ", 
              "valueFrom": {
                "engine": "#cwl-js-engine", 
                "class": "Expression", 
                "script": "{\n  if ($job.inputs.filter)\n  {\n  \treturn '\"'.concat($job.inputs.filter, '\"')\n  }\n}"
              }, 
              "sbg:cmdInclude": true, 
              "prefix": "--filter", 
              "separate": true
            }, 
            "description": "Set custom filter for alignments.", 
            "sbg:category": "Basic Options", 
            "label": "Filter", 
            "type": [
              "null", 
              "string"
            ], 
            "id": "#filter"
          }, 
          {
            "sbg:altPrefix": "l", 
            "inputBinding": {
              "prefix": "--compression-level", 
              "sbg:cmdInclude": true, 
              "separate": true
            }, 
            "description": "Specify compression level (from 0 to 9, works only for BAM output).", 
            "label": "compression_level", 
            "type": [
              "null", 
              "int"
            ], 
            "id": "#compression_level"
          }, 
          {
            "sbg:altPrefix": "m", 
            "inputBinding": {
              "prefix": "--memory-limit=", 
              "sbg:cmdInclude": true, 
              "separate": false
            }, 
            "description": "Approximate total memory limit for all threads (by default 2GB).", 
            "label": "Memory limit", 
            "type": [
              "null", 
              "int"
            ], 
            "id": "#memory_limit"
          }, 
          {
            "sbg:altPrefix": "n", 
            "inputBinding": {
              "prefix": "--sort-by-name", 
              "sbg:cmdInclude": true, 
              "separate": true
            }, 
            "description": "Sort by read name instead of coordinate (lexicographical order).", 
            "label": "Sort by name", 
            "type": [
              "null", 
              "boolean"
            ], 
            "id": "#sort_by_name"
          }, 
          {
            "sbg:altPrefix": "N", 
            "inputBinding": {
              "prefix": "--natural-sort", 
              "sbg:cmdInclude": true, 
              "separate": true
            }, 
            "description": "Sort by read name instead of coordinate (so-called 'natural' sort as in samtools).", 
            "label": "Natural sort", 
            "type": [
              "null", 
              "boolean"
            ], 
            "id": "#natural_sort"
          }, 
          {
            "sbg:altPrefix": "u", 
            "inputBinding": {
              "prefix": "--uncompressed-chunks", 
              "sbg:cmdInclude": true, 
              "separate": true
            }, 
            "description": "Write sorted chunks as uncompressed BAM (default is writing with compression level 1), that might be faster in some cases but uses more disk space.", 
            "label": "Uncompressed chunks", 
            "type": [
              "null", 
              "boolean"
            ], 
            "id": "#uncompressed_chunks"
          }, 
          {
            "sbg:altPrefix": "-t", 
            "inputBinding": {
              "valueFrom": {
                "engine": "#cwl-js-engine", 
                "class": "Expression", 
                "script": "{\n  if ($job.inputs.nthreads)\n    return $job.inputs.nthreads\n  else\n    return 8\n}"
              }, 
              "sbg:cmdInclude": true, 
              "prefix": "--nthreads=", 
              "separate": false
            }, 
            "description": "Number of threads to use.", 
            "sbg:toolDefaultValue": "8", 
            "label": "Number of threads", 
            "type": [
              "null", 
              "int"
            ], 
            "id": "#nthreads"
          }
        ], 
        "sbg:links": [
          {
            "id": "http://lomereiter.github.io/sambamba/docs/sambamba-sort.html", 
            "label": "Homepage"
          }, 
          {
            "id": "https://github.com/lomereiter/sambamba", 
            "label": "Source code"
          }, 
          {
            "id": "https://github.com/lomereiter/sambamba/wiki", 
            "label": "Wiki"
          }, 
          {
            "id": "https://github.com/lomereiter/sambamba/releases/tag/v0.5.9", 
            "label": "Download"
          }, 
          {
            "id": "http://lomereiter.github.io/sambamba/docs/sambamba-sort.html", 
            "label": "Publication"
          }
        ], 
        "successCodes": [], 
        "sbg:sbgMaintained": false, 
        "sbg:modifiedOn": 1457046590, 
        "outputs": [
          {
            "sbg:fileTypes": "BAM", 
            "description": "Outout sorted BAM file.", 
            "label": "Sorted BAM", 
            "outputBinding": {
              "sbg:inheritMetadataFrom": "#input", 
              "glob": "*.sorted.bam", 
              "sbg:metadata": {}
            }, 
            "type": [
              "null", 
              "File"
            ], 
            "id": "#sorted"
          }
        ], 
        "sbg:contributors": [
          "kghosesbg"
        ], 
        "sbg:project": "kghosesbg/mitty-apps", 
        "requirements": [
          {
            "requirements": [
              {
                "dockerPull": "rabix/js-engine", 
                "class": "DockerRequirement"
              }
            ], 
            "class": "ExpressionEngineRequirement", 
            "id": "#cwl-js-engine"
          }
        ], 
        "temporaryFailCodes": [], 
        "class": "CommandLineTool", 
        "sbg:job": {
          "allocatedResources": {
            "mem": 1024, 
            "cpu": 1
          }, 
          "inputs": {
            "memory_limit": 0, 
            "nthreads": 0, 
            "natural_sort": "natural_sort", 
            "filter": "", 
            "compression_level": 0, 
            "uncompressed_chunks": true, 
            "input": {
              "path": "/root/dir/example.bam"
            }, 
            "sort_by_name": true
          }
        }, 
        "hints": [
          {
            "dockerImageId": "59e577b13d5d", 
            "dockerPull": "images.sbgenomics.com/mladenlsbg/sambamba:0.5.9", 
            "class": "DockerRequirement"
          }, 
          {
            "class": "sbg:CPURequirement", 
            "value": 1
          }, 
          {
            "class": "sbg:MemRequirement", 
            "value": 1024
          }
        ], 
        "sbg:id": "kghosesbg/mitty-apps/sambamba-sort-0-5-9/0", 
        "sbg:createdOn": 1457046590, 
        "sbg:toolkit": "Sambamba", 
        "stdin": "", 
        "sbg:cmdPreview": "/opt/sambamba_0.5.9/sambamba_v0.5.9 sort --compression-level 0 --memory-limit=0 --sort-by-name  --natural-sort  --uncompressed-chunks  --nthreads=8 --out=example.sorted.bam  /root/dir/example.bam /root/dir/example.bam", 
        "sbg:license": "GNU General Public License v2.0 only", 
        "sbg:revisionsInfo": [
          {
            "sbg:modifiedOn": 1457046590, 
            "sbg:modifiedBy": "kghosesbg", 
            "sbg:revision": 0
          }
        ], 
        "sbg:validationErrors": []
      }, 
      "outputs": [
        {
          "id": "#Sambamba_Sort.sorted"
        }
      ], 
      "sbg:y": 245, 
      "sbg:x": 423, 
      "id": "#Sambamba_Sort"
    }, 
    {
      "inputs": [
        {
          "source": [
            "#Sambamba_Sort.sorted"
          ], 
          "id": "#bam_index.bam"
        }
      ], 
      "run": {
        "stdout": "", 
        "sbg:links": [
          {
            "id": "https://github.com/pezmaster31/bamtools", 
            "label": "Homepage"
          }, 
          {
            "id": "https://github.com/pezmaster31/bamtools/wiki", 
            "label": "Wiki"
          }
        ], 
        "sbg:cmdPreview": "/opt/bamtools/bin/bamtools index -in input/input_bam.bam", 
        "sbg:toolAuthor": "Derek Barnett, Erik Garrison, Gabor Marth, and Michael Stromberg", 
        "id": "https://api.sbgenomics.com/v2/apps/kghosesbg/mitty-apps/bam-index/9/raw/", 
        "successCodes": [], 
        "sbg:revision": 9, 
        "sbg:latestRevision": 9, 
        "sbg:modifiedBy": "kghosesbg", 
        "sbg:toolkitVersion": "2.4.0", 
        "label": "bam-index", 
        "sbg:homepage": "https://github.com/pezmaster31/bamtools/wiki", 
        "arguments": [], 
        "sbg:createdBy": "kghosesbg", 
        "inputs": [
          {
            "sbg:stageInput": "copy", 
            "sbg:fileTypes": "BAM", 
            "inputBinding": {
              "position": 0, 
              "prefix": "-in", 
              "sbg:cmdInclude": true, 
              "separate": true
            }, 
            "description": "The input BAM file.", 
            "sbg:category": "Input & Output", 
            "label": "Input BAM file", 
            "type": [
              "File"
            ], 
            "id": "#bam"
          }
        ], 
        "sbg:categories": [
          "SAM/BAM-Processing", 
          "Indexing"
        ], 
        "description": "Creates an index file (.bai) for a BAM file.", 
        "sbg:sbgMaintained": false, 
        "sbg:modifiedOn": 1457030756, 
        "outputs": [
          {
            "sbg:fileTypes": "bam", 
            "outputBinding": {
              "secondaryFiles": [
                ".bai"
              ], 
              "glob": "*.bam"
            }, 
            "type": [
              "null", 
              "File"
            ], 
            "id": "#bam_out", 
            "label": "OUT BAM"
          }, 
          {
            "sbg:fileTypes": "bai", 
            "outputBinding": {
              "glob": "*.bai"
            }, 
            "type": [
              "null", 
              "File"
            ], 
            "id": "#bai", 
            "label": "BAM Index"
          }
        ], 
        "baseCommand": [
          "/opt/bamtools/bin/bamtools", 
          "index"
        ], 
        "sbg:contributors": [
          "kghosesbg"
        ], 
        "sbg:project": "kghosesbg/mitty-apps", 
        "requirements": [], 
        "temporaryFailCodes": [], 
        "class": "CommandLineTool", 
        "sbg:job": {
          "allocatedResources": {
            "mem": 1000, 
            "cpu": 1
          }, 
          "inputs": {
            "bam": {
              "secondaryFiles": [], 
              "size": 0, 
              "class": "File", 
              "path": "input/input_bam.bam"
            }
          }
        }, 
        "hints": [
          {
            "dockerImageId": "f808163d4cd3", 
            "dockerPull": "images.sbgenomics.com/markop/bamtools:2.4.0", 
            "class": "DockerRequirement"
          }, 
          {
            "class": "sbg:CPURequirement", 
            "value": 1
          }, 
          {
            "class": "sbg:MemRequirement", 
            "value": 1000
          }
        ], 
        "sbg:id": "kghosesbg/mitty-apps/bam-index/9", 
        "sbg:createdOn": 1456763296, 
        "sbg:toolkit": "BamTools", 
        "stdin": "", 
        "sbg:license": "The MIT License", 
        "sbg:revisionsInfo": [
          {
            "sbg:modifiedOn": 1457030756, 
            "sbg:modifiedBy": "kghosesbg", 
            "sbg:revision": 9
          }, 
          {
            "sbg:modifiedOn": 1456763296, 
            "sbg:modifiedBy": "kghosesbg", 
            "sbg:revision": 0
          }, 
          {
            "sbg:modifiedOn": 1456763358, 
            "sbg:modifiedBy": "kghosesbg", 
            "sbg:revision": 1
          }, 
          {
            "sbg:modifiedOn": 1456763535, 
            "sbg:modifiedBy": "kghosesbg", 
            "sbg:revision": 2
          }, 
          {
            "sbg:modifiedOn": 1456784972, 
            "sbg:modifiedBy": "kghosesbg", 
            "sbg:revision": 3
          }, 
          {
            "sbg:modifiedOn": 1457006620, 
            "sbg:modifiedBy": "kghosesbg", 
            "sbg:revision": 4
          }, 
          {
            "sbg:modifiedOn": 1457006665, 
            "sbg:modifiedBy": "kghosesbg", 
            "sbg:revision": 5
          }, 
          {
            "sbg:modifiedOn": 1457006672, 
            "sbg:modifiedBy": "kghosesbg", 
            "sbg:revision": 6
          }, 
          {
            "sbg:modifiedOn": 1457009457, 
            "sbg:modifiedBy": "kghosesbg", 
            "sbg:revision": 8
          }, 
          {
            "sbg:modifiedOn": 1457009071, 
            "sbg:modifiedBy": "kghosesbg", 
            "sbg:revision": 7
          }
        ], 
        "sbg:validationErrors": []
      }, 
      "outputs": [
        {
          "id": "#bam_index.bam_out"
        }, 
        {
          "id": "#bam_index.bai"
        }
      ], 
      "sbg:y": 245, 
      "sbg:x": 693, 
      "id": "#bam_index"
    }
  ], 
  "sbg:revisionsInfo": [
    {
      "sbg:modifiedOn": 1457046142, 
      "sbg:modifiedBy": "kghosesbg", 
      "sbg:revision": 0
    }, 
    {
      "sbg:modifiedOn": 1457046667, 
      "sbg:modifiedBy": "kghosesbg", 
      "sbg:revision": 1
    }, 
    {
      "sbg:modifiedOn": 1457056300, 
      "sbg:modifiedBy": "kghosesbg", 
      "sbg:revision": 2
    }, 
    {
      "sbg:modifiedOn": 1457061726, 
      "sbg:modifiedBy": "kghosesbg", 
      "sbg:revision": 3
    }, 
    {
      "sbg:modifiedOn": 1457062113, 
      "sbg:modifiedBy": "kghosesbg", 
      "sbg:revision": 4
    }, 
    {
      "sbg:modifiedOn": 1457062157, 
      "sbg:modifiedBy": "kghosesbg", 
      "sbg:revision": 5
    }
  ], 
  "sbg:project": "kghosesbg/mitty-apps"
}